<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Visualization</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
</head>
<body>
    <header>
        <div class="header-content">
            <h1>Mapping Malaysia’s Future</h1>
            <h3>Visualizing Fertility across States</h3>
        </div>
    </header>

    <main>
        <section class="chart-container">
            <h2>Death and Fertility Rates</h2>
            <div class="chart-and-text">
                <div class="charts">
                    <div id="chart1" class="chart"></div>
                </div>
                <div class="text-right">
                    <h4>Total Fertility Rate</h4>
                    <p>Total fertility rate is the total number of children born to a woman during her child bearing years experiencing the age specific fertility Rate.</p>
                    <h4>Death Rate</h4>
                    <p>Death rate is the number of deaths per 1000 population</p>
                    <h3>Death Rate VS Fertility Rate</h3>
                    <p>As the years progress, the gap between the death and fertility rate continues to grow larger which is evident in 2022 as in this year no state have fertility rates that exceed
                                the death rate which is an indicator of potential demographic collapse. As the population continues to age with the number of newborns decreasing.
                                
                    </p>               
                    <div class="chart-and-text"></div>
                        <div class="charts">
                            <div id="chart5" class="chart"></div>
                        </div>
                    </div>                         
                </div>
            </div>
            <section class="chart-container">
                <h2>Household Income Comparison</h2>
                <div class="chart-and-text">
                    <div class="charts" style="min-width: 70%;">
                        <div id="chart2" class="chart"></div>
                    </div>
                    <div class="text-right">
                        <h3>Economic Disparity</h3>
                        <p>The chart highlights disparities in household income across states with the <b>box height scaled to state population numbers</b>.</p>
                        <p>Variation in income reflects economic development of each state with less industrialized states like Kelantan, Kedah and Perak lagging behind.</p>
                        <p><b>Disparities</b> also <b>exist within each state</b> as the top 3 states, Selangor, Kuala Lumpur and Putrajaya display much broader ranges of income in comparison to the other states.</p>
                        <div class="image-container">
                            <figure>
                                <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/c/cc/Kuala_Lumpur_Skyline_at_dusk_1.jpg/350px-Kuala_Lumpur_Skyline_at_dusk_1.jpg" alt="Image 1">
                                <figcaption>Kuala Lumpur skyline at dusk</figcaption>
                            </figure>
                            <figure>
                                <img src="https://prestige-sky-b10-unit-1-kota-bharu-my-15000.booked.net/data/Photos/OriginalPhoto/12397/1239751/1239751024/Prestige-Sky-Riverfront-Apartment-Kota-Bharu-Exterior.JPEG" alt="Image 2">
                                <figcaption>Capital city of Kelantan, Kota Bharu</figcaption>
                            </figure>
                        </div>
                    </div>
                </div>
            </section>
            <section class="chart-container">    
                <h2>Difference in Total Fertility Rates</h2>       
                <div class="charts">
                    <div id="chart3" class="chart map"style="padding: 1%;"></div>
                </div>
                <div class="text-below" style="text-align: center;">
                    <p>States located in the north west of the Malaysian Peninsula display much higher rates in comparison to the rest of Malaysia, with Kuala Lumpur and Pulau Pinang having fertility rates that are almost two times lower in comparison.</p>
                </div>
            </section>
        <section class="chart-container">
            <h2>Highlighting the Correlation</h2>
            <div class="charts">
                <div id="chart4" class="chart"></div>
            </div>
            <div class="text-left">
                <p>This chart highlights the clear disparity between household income and fertility rates in Malaysia, suggesting that higher-income states tend to have lower fertility rates, likely due to urbanization, higher living costs, and lifestyle choices. On the other hand, states with lower incomes, particularly rural areas, tend to have higher fertility rates, which could be linked to traditional family structures and lower economic pressures.</p>
            </div>
        </section>

        <section class="chart-container">
            <h2>The Future</h2>
            <div class="chart-and-text">
                <div class="charts">
                    <div id="chart6" class="chart"></div>
                </div>
                <div class="text-left">
                    <p>
                        Given the disparity in the growth for the two age group populations, Malaysia’s future will be significantly shaped by how well it adapts to an aging population and a shrinking younger demographic. While there are clear challenges in areas like the economy, healthcare, and social welfare, there are also opportunities for innovation, policy reforms, and economic diversification. Effective planning, investment in technology, and policies that address the needs of both young and old will be critical for Malaysia’s long-term sustainability and prosperity.
                    </p>
                    <div class="image-single">
                        <figure>
                            <img src="https://focusmalaysia.my/wp-content/uploads/Elderly-Bernama.jpg" alt="Future Image">
                            <figcaption>The Future of Malaysia</figcaption>
                        </figure>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <script>
        const chart1Url = 'https://raw.githubusercontent.com/Jastej-Gill/FIT3179-Visualization2/refs/heads/main/js/death_rate_fertility_vg.json';
        const chart2Url = 'https://raw.githubusercontent.com/Jastej-Gill/FIT3179-Visualization2/refs/heads/main/js/hh_income_boxplot.vg.json';
        const chart3Url = 'https://raw.githubusercontent.com/Jastej-Gill/FIT3179-Visualization2/refs/heads/main/js/tfr_chloropleth_spec.vg.json';
        const chart4Url = 'https://raw.githubusercontent.com/Jastej-Gill/FIT3179-Visualization2/refs/heads/main/js/median_income_tfr_2022.vg.json';
        const chart5Url = 'https://raw.githubusercontent.com/Jastej-Gill/FIT3179-Visualization2/refs/heads/main/js/death_rate_tfr_diff.vg.json';
        const chart6Url = 'https://raw.githubusercontent.com/Jastej-Gill/FIT3179-Visualization2/refs/heads/main/js/population_growth_line_chart.vg.json';

        vegaEmbed('#chart1', chart1Url).catch(console.error);
        vegaEmbed('#chart2', chart2Url).catch(console.error);
        vegaEmbed('#chart3', chart3Url).catch(console.error);
        vegaEmbed('#chart4', chart4Url).catch(console.error);
        vegaEmbed('#chart5', chart5Url).catch(console.error);
        vegaEmbed('#chart6', chart6Url).catch(console.error);

    </script>
</body>
</html>
